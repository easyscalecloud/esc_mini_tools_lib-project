# Confluence 批量导出工具 - 产品设计文档

## 1. 产品概述

### 1.1 产品定位
一个轻量级的单页面应用（Single Page App），旨在帮助用户快速、灵活地将 Atlassian Confluence 页面内容批量导出为纯文本格式，以便于在 AI 工具中使用作为知识库。

### 1.2 核心价值主张
- **极简设计**：无需安装插件，无需登录注册，打开即用
- **批量处理**：支持同时处理多个 Confluence 页面
- **用户可控**：将数据获取的控制权完全交给用户，避免后台自动抓取带来的安全顾虑
- **快速高效**：相比现有市场插件的等待式导出，提供更流畅的用户体验

## 2. 问题定义

### 2.1 目标用户痛点
1. **现有导出方式效率低**：Confluence 原生导出功能和现有插件在批量导出时需要逐个点击、等待，用户体验差
2. **格式转换不便**：需要将 Confluence 内容转换为 Markdown 或纯文本以便 AI 工具使用
3. **缺乏灵活性**：现有工具功能固化，无法满足快速、批量、自定义的导出需求
4. **安全顾虑**：第三方工具需要 OAuth 授权访问敏感数据，用户有安全顾虑

### 2.2 解决方案
通过利用 Confluence 的 API 特性（已登录用户可直接访问 JSON 格式的页面内容），让用户手动复制粘贴数据，在保证安全性的同时提供高效的批量处理能力。

## 3. 产品功能设计

### 3.1 核心功能流程

#### 阶段一：准备阶段
- 用户根据需要添加空行（可一次性添加多行，如 3 行、5 行等）
- 每一行代表一个待导出的 Confluence 页面

#### 阶段二：输入阶段
- 用户在第一列（URL 列）中粘贴 Confluence 页面的原始 URL
- 支持直接从浏览器地址栏复制的任何格式 URL

#### 阶段三：URL 转换阶段
- 点击"生成 API URL"按钮
- 系统自动将第一列的页面 URL 转换为对应的 JSON API URL
- 转换结果显示在第二列（API URL 列）

#### 阶段四：数据获取阶段
- 用户可批量打开所有生成的 API URL（在新标签页中）
- 或逐个点击每个 URL 链接打开
- 在打开的页面中，用户手动全选（Ctrl+A）、复制（Ctrl+C）JSON 内容
- 将复制的内容粘贴到第三列（JSON 内容列）的文本框中

#### 阶段五：合并导出阶段
- 点击"合并转换"（Consolidate & Convert）按钮
- 系统将所有第三列中的 JSON 内容整合并转换为纯文本格式
- 在新的文本区域中显示合并后的内容
- 用户可选择直接复制或下载为 .txt 文件

### 3.2 界面布局

#### 3.2.1 表格结构
采用多列表格设计，每一行代表一个文档：

| 列名 | 功能说明 | 交互方式 |
|------|----------|----------|
| **第一列：原始 URL** | 用户粘贴 Confluence 页面链接 | 文本输入框 |
| **第二列：API URL** | 自动生成的 JSON API 地址 | 可点击的链接 |
| **第三列：JSON 内容** | 用户粘贴的页面 JSON 数据 | 文本输入框（简化显示） |

#### 3.2.2 操作按钮区域
- **添加行按钮**：快速添加 1/3/5 个空行
- **生成 API URL 按钮**：批量转换第一列 URL
- **批量打开按钮**：一键在新标签页中打开所有 API URL
- **合并转换按钮**：生成最终的合并文档

#### 3.2.3 输出区域
- 可复制的文本区域，显示合并后的内容
- 下载按钮，导出为 .txt 文件

### 3.3 设计细节

#### 文本框优化
- 第三列的 JSON 内容框采用简化显示（仅显示前几行内容）
- 避免渲染大量文本导致的性能问题
- 主要功能是作为 Ctrl+V 的"容器"，而非阅读器

#### 用户体验优化
- 清晰的步骤提示，引导用户完成操作流程
- 错误提示：URL 格式不正确时给予提示
- 进度指示：显示已完成/总共的文档数量

## 4. 技术架构概述

### 4.1 技术选型原则
- **纯前端实现**：Single Page Application，无需后端服务器
- **零依赖登录**：利用用户浏览器中已有的 Confluence 登录状态
- **轻量化**：快速加载，无复杂依赖

### 4.2 核心机制
- **URL 转换逻辑**：将 Confluence 页面 URL 转换为对应的 REST API URL
- **JSON 解析**：提取 body 内容并转换为纯文本格式
- **文本合并**：将多个文档内容整合为单一可下载文件

### 4.3 安全与隐私
- **无数据传输**：所有处理在用户浏览器本地完成
- **无数据存储**：不保存用户的任何 Confluence 内容
- **依赖用户权限**：仅能访问用户本身有权限查看的页面

## 5. 使用场景

### 5.1 典型使用场景
1. **AI 知识库准备**：将团队的 Confluence 文档导出，作为 ChatGPT、Claude 等 AI 工具的上下文
2. **文档备份**：快速备份重要的 Confluence 页面内容
3. **内容迁移**：将 Confluence 内容迁移到其他平台前的预处理
4. **离线阅读**：批量导出文档以便离线查看

### 5.2 用户角色
- 技术团队成员：需要快速访问技术文档
- 产品经理：整理产品需求文档
- 知识管理员：定期备份和整理知识库
- 任何需要在 AI 工具中使用 Confluence 内容的用户

## 6. 产品优势

### 6.1 与现有方案对比

| 对比维度 | 本产品 | Confluence 原生导出 | 第三方插件 |
|---------|--------|---------------------|-----------|
| **批量处理效率** | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ |
| **用户体验流畅度** | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ |
| **安全性** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| **无需安装** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐ |
| **灵活性** | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ |

### 6.2 核心竞争力
1. **零摩擦启动**：无需安装、注册、授权
2. **透明可控**：用户清楚知道每一步在做什么
3. **性能优异**：纯前端处理，无网络等待
4. **安全可靠**：数据不经过第三方服务器

## 7. 未来规划

### 7.1 短期优化（V1.1 - V1.5）
- 支持更多输出格式（Markdown、HTML）
- 添加内容预览功能
- 支持配置保存（记住常用的 URL 列表）
- 优化大文档处理性能

### 7.2 中期规划（V2.0）
- 增加简单的文本处理功能（去重、格式清理）
- 支持导出配置模板
- 添加快捷键支持

### 7.3 长期愿景（V3.0+）
考虑开发基于 OAuth 授权的增强版本，特点如下：
- 用户需要登录并订阅服务
- 支持自动抓取和后台处理
- 提供更高级的批量操作和定时任务功能
- 企业级权限管理

**注：OAuth 版本将作为独立产品，本 Single Page App 将持续维护作为免费的轻量级方案。**

## 8. 成功指标

### 8.1 用户指标
- 单次会话平均导出文档数量
- 从打开页面到完成导出的平均时长
- 用户回访率

### 8.2 产品指标
- 页面加载时间 < 2 秒
- 支持单次处理 50+ 文档
- 零错误率的 URL 转换准确性

### 8.3 用户反馈
- 用户满意度评分
- 功能改进建议收集
- 使用场景多样性

## 9. 风险与限制

### 9.1 技术限制
- 依赖 Confluence API 的稳定性和格式
- 浏览器性能限制（大量文档时）
- 需要用户手动操作，无法完全自动化

### 9.2 使用限制
- 用户必须已登录 Confluence
- 只能导出用户有权限访问的页面
- 不支持导出附件、图片等二进制内容

### 9.3 潜在风险
- Confluence API 变更可能影响功能
- 不同浏览器可能有兼容性差异

## 10. 总结

本产品通过创新的"用户手动复制粘贴"模式，在保证安全性和隐私性的前提下，提供了一个极其高效、灵活的 Confluence 内容批量导出解决方案。它填补了现有工具在批量处理和用户体验方面的空白，特别适合需要频繁将 Confluence 内容用于 AI 工具的知识工作者。

产品的核心理念是"简单、透明、高效"，通过将控制权交给用户，在简化技术复杂度的同时提供了卓越的使用体验。